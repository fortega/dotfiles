#!/usr/bin/zsh

MIN=5

BASE="/sys/class/backlight/"
BASE="$BASE/$(ls $BASE | head -n1)"

MAX=$(< $BASE/max_brightness)

set_v(){
    echo "Saving: $1"
    echo $1 | sudo tee $BASE/brightness > /dev/null
    echo "Saved."
}

show(){
    echo Actual: $(< $BASE/actual_brightness)
}

if [ $# -gt 0 ]
then
    if [ $1 -ge $MIN ] && [ $1 -le $MAX ]
    then
	    set_v $1
    else
	    show
    fi
else
    b=$( < $BASE/actual_brightness)
    if [ $b -lt $MIN ]
    then
	    set_v $MIN
    else
	    show
    fi
fi


